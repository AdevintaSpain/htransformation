# Template for configuration

http:
  routers:
    my-router:
      middlewares:
        - htransformation
      entrypoints:
        - http
      service: service-whoami
      rule: Path(`/whoami`)

  services:
    service-whoami:
      loadBalancer:
        servers:
          - url: http://localhost:5000
        passHostHeader: false
  middlewares:
    htransformation:
      plugin:
        dev:
          Transformations:
            - Transform:
              Name: 'Transform1'
              Rename: 'X-Forwarded-Port'
              With: 'foo'
              Type: 'request'
            - Transform:
              Name: 'Transform2'
              Rename: 'X-Forwarded-Proto'
              With: 'bar'
              Type: 'request'
          Setters:
            - Set:
              Name: 'Set1'
              Header: 'foo'
              Value: 'bar'
          Deletions:
            - Del:
              Name: 'Del1'
              Header: 'foo'
